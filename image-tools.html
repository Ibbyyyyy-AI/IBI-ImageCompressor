<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>IBI TOOLS — Image Converters</title>
  <meta name="description" content="IBI TOOLS Image Converters — Convert, resize, and compress images in your browser. Supports JPG, PNG, WebP, BMP. No uploads required.">

  <!-- Theme & Style -->
  <style>
    :root{
      --bg:#071025; --card:#0b1220; --muted:#94a3b8; --accent:#7c3aed; --glass: rgba(255,255,255,0.03); --text:#e6eef8
    }
    @media (prefers-color-scheme:light){
      :root{ --bg:#f8fafc; --card:#ffffff; --muted:#475569; --accent:#0ea5a4; --glass: rgba(2,6,23,0.03); --text:#0f172a }
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:var(--bg);color:var(--text);padding:16px}
    header, footer{max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:8px 0}
    .logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,#5eead4,#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;color:#022}
    .brand{display:flex;gap:12px;align-items:center}
    .container{max-width:1100px;margin:0 auto}
    main{display:grid;grid-template-columns:1fr;gap:16px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.4)}
    .controls{display:grid;gap:12px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    label{color:var(--muted);font-size:14px}
    input, select{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:inherit}
    input[type=range]{width:180px}
    button{background:linear-gradient(90deg,var(--accent),#06b6d4);border:0;padding:8px 12px;border-radius:8px;color:#021;cursor:pointer;font-weight:600}
    .preview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-top:12px}
    .preview{background:var(--glass);padding:8px;border-radius:8px;display:flex;flex-direction:column;gap:6px;align-items:center}
    .thumb{width:100%;height:140px;object-fit:contain;background:#061428;border-radius:6px}
    .muted{color:var(--muted)}
  </style>

  <!-- JSZip for ZIP download -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <!-- Google AdSense placeholder (edit ad unit id) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>

  <!-- Top Ad -->
  <ins class="adsbygoogle"
       style="display:block;width:100%;height:90px"
       data-ad-client="YOUR-AD-CLIENT"
       data-ad-slot="YOUR-TOP-AD-SLOT"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <header>
    <div class="brand">
      <div class="logo">IBI</div>
      <div>
        <div style="font-weight:700">IBI TOOLS</div>
        <div class="muted" style="font-size:13px">Image Converters — browser-only</div>
      </div>
    </div>
    <div class="muted">Made by IBI</div>
  </header>

  <div class="container">
    <main>
      <section class="card">
        <h2>Convert & Resize Images</h2>
        <div class="controls">
          <div class="row">
            <input id="fileInput" type="file" accept="image/*" multiple>
            <button id="clearBtn">Clear</button>
          </div>

          <div class="row">
            <label>Output format:</label>
            <select id="format">
              <option value="webp">WebP</option>
              <option value="jpeg">JPEG</option>
              <option value="png">PNG</option>
              <option value="bmp">BMP</option>
            </select>

            <label>Quality (%):</label>
            <input id="quality" type="range" min="5" max="100" value="80">
            <span id="qualityVal">80%</span>

            <label>Max Width (px):</label>
            <input id="maxWidth" type="number" min="16" placeholder="optional" style="width:80px">

            <label>Max Height (px):</label>
            <input id="maxHeight" type="number" min="16" placeholder="optional" style="width:80px">
          </div>

          <div class="row">
            <button id="convertAll">Convert All</button>
            <button id="zipBtn">Download ZIP</button>
          </div>
        </div>

        <div id="results" class="preview-grid"></div>
      </section>
    </main>

    <!-- Bottom Ad -->
    <ins class="adsbygoogle"
         style="display:block;width:100%;height:90px"
         data-ad-client="YOUR-AD-CLIENT"
         data-ad-slot="YOUR-BOTTOM-AD-SLOT"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

    <footer>Made by IBI — IBI TOOLS</footer>
  </div>

  <script>
    const fileInput = document.getElementById('fileInput');
    const clearBtn = document.getElementById('clearBtn');
    const formatSel = document.getElementById('format');
    const qualityRange = document.getElementById('quality');
    const qualityVal = document.getElementById('qualityVal');
    const maxWidthInput = document.getElementById('maxWidth');
    const maxHeightInput = document.getElementById('maxHeight');
    const convertAllBtn = document.getElementById('convertAll');
    const zipBtn = document.getElementById('zipBtn');
    const results = document.getElementById('results');

    let currentFiles = [];

    qualityRange.addEventListener('input', ()=> qualityVal.textContent = qualityRange.value + '%');

    fileInput.addEventListener('change', (e)=>{
      currentFiles = Array.from(e.target.files).filter(f=>f.type.startsWith('image'));
      renderPreviews();
    });

    clearBtn.addEventListener('click', ()=>{
      fileInput.value = '';
      currentFiles = [];
      renderPreviews();
    });

    function renderPreviews(){
      results.innerHTML = '';
      currentFiles.forEach((file,i)=>{
        const div = document.createElement('div'); div.className='preview';
        const img = document.createElement('img'); img.className='thumb'; img.alt=file.name;
        const name = document.createElement('div'); name.textContent=file.name; name.className='muted';
        const stat = document.createElement('div'); stat.textContent='Original: '+Math.round(file.size/1024)+' KB';
        div.append(img,name,stat);
        results.appendChild(div);
        const reader = new FileReader();
        reader.onload = e=>img.src=e.target.result;
        reader.readAsDataURL(file);
      });
    }

    async function convertImage(file){
      const reader = new FileReader();
      return new Promise((resolve)=>{
        reader.onload = async e=>{
          const img = new Image();
          img.onload = async ()=>{
            let w = img.naturalWidth;
            let h = img.naturalHeight;
            const maxW = parseInt(maxWidthInput.value)||w;
            const maxH = parseInt(maxHeightInput.value)||h;
            if(w>maxW){ const r=maxW/w; w=Math.round(w*r); h=Math.round(h*r); }
            if(h>maxH){ const r=maxH/h; w=Math.round(w*r); h=Math.round(h*r); }
            const canvas=document.createElement('canvas'); canvas.width=w; canvas.height=h;
            const ctx=canvas.getContext('2d');
            ctx.drawImage(img,0,0,w,h);
            const fmt=formatSel.value;
            const q=parseInt(qualityRange.value)/100;
            canvas.toBlob(blob=>{
              resolve(blob);
            }, fmt==='png'?'image/png':fmt==='bmp'?'image/bmp':fmt==='jpeg'?'image/jpeg':'image/webp', q);
          };
          img.src=e.target.result;
        };
        reader.readAsDataURL(file);
      });
    }

    convertAllBtn.addEventListener('click', async ()=>{
      for(let i=0;i<currentFiles.length;i++){
        const div = results.children[i];
        const stat = div.querySelector('div:nth-child(3)');
        stat.textContent='Processing...';
        const blob = await convertImage(currentFiles[i]);
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href=url; a.download=currentFiles[i].name.replace(/\.[^.]+$/,'')+'.'+formatSel.value; a.textContent='Download'; a.style.marginLeft='6px';
        div.appendChild(a);
        stat.textContent='Done: '+Math.round(blob.size/1024)+' KB';
      }
    });

    zipBtn.addEventListener('click', async ()=>{
      if(currentFiles.length===0){ alert('No files'); return; }
      const zip = new JSZip();
      for(let i=0;i<currentFiles.length;i++){
        const blob = await convertImage(currentFiles[i]);
        zip.file(currentFiles[i].name.replace(/\.[^.]+$/,'')+'.'+formatSel.value, blob);
      }
      const out = await zip.generateAsync({type:'blob'});
      const link = document.createElement('a'); link.href=URL.createObjectURL(out); link.download='images.zip'; link.click();
    });
  </script>
</body>
</html>
